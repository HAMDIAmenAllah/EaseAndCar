{% extends 'base.html.twig' %}

{% block title %}{{controller_name}}{% endblock %}
{% block stylesheets %}
	<style>
		* {
        	box-sizing: border-box;
		}

		body {
			background-color: #f1f1f1;
		}

		#regForm {
			background-color: #ffffff;
			margin: 100px auto;
			font-family: Raleway;
			padding: 40px;
			width: 70%;
			min-width: 300px;
		}

		h1 {
			text-align: center;
		}

		input {
			padding: 10px;
			width: 100%;
			font-size: 17px;
			font-family: Raleway;
			border: 1px solid #aaaaaa;
		}

		/* Mark input boxes that gets an error on validation: */
		input.invalid {
			background-color: #ffdddd;
		}

		/* Hide all steps by default: */
		.tab {
			display: none;
		}

		button {
			background-color: #009cde;
			color: #ffffff;
			border: none;
			padding: 10px 20px;
			font-size: 17px;
			font-family: Raleway;
			cursor: pointer;
		}

		button:hover {
			opacity: 0.8;
		}

		#prevBtn {
			background-color: #bbbbbb;
		}

		/* Make circles that indicate the steps of the form: */
		.step {
			height: 15px;
			width: 15px;
			margin: 0 2px;
			background-color: #bbbbbb;
			border: none;
			border-radius: 50%;
			display: inline-block;
			opacity: 0.5;
		}

		.step.active {
			opacity: 1;
		}

		/* Mark the steps that are finished and valid: */
		.step.finish {
			background-color: #009cde;
		}
		.bg-success{
			background-color: #009cde !important;   
		}
	</style>
{% endblock %}
{% block content %}
	{% include "header.html.twig" %}
	<main id="main">
		<!-- ======= Hero Section ======= -->
		<section id="heroD" class="d-flex justify-cntent-center align-items-center">
			<div id="heroCarousel" class="container carousel carousel-fade"	data-bs-ride="carousel"	data-bs-interval="5000">
			<!-- Slide 1 -->
				<div class="carousel-item active">
					<div class="carousel-container">
						<img src="" alt="" class="img-fluid" />
						<h2>Demandez votre devis</h2>
						<br/>
						<p class="animate__animated animate__fadeInUp fs-4">
							Vous souhaitez avoir un devis ? <br>
							Remplissez le formulaire et nous vous répondons dans les meilleurs délais.
						</p>
					</div>
				</div>
			</div>
		</section>
		<!-- End Hero -->
		<!--Devis Form-->
		<section class="p-2" id="contactForm" >
			<form id="regForm" action="#" method="POST">
				<center>
					<div class="section-title">
						<h2 id="titre" class="fs-1">Faites votre demande</h2>
					</div>
				</center>
				<!-- One "tab" for each step in the form: -->
				{{ form_start(form) }}
				<div class="tab">
					<div class="progress mt-3 mb-3">
						<div class="progress-bar bg-success" role="progressbar" style="width: 33%" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
					</div>
					<h4 class="text-center">Informations Entreprise</h4>
					
					<p>
						{{ form_widget(form.typeEntreprise) }}
					</p>
					<p>{{ form_widget(form.nomEntreprise, {'attr': {'placeholder' : '*Nom de l\'entreprise', 'oninput' : "this.className = ''", 'class' : 'input', 'name': 'entreprise' }}) }}</p>
					<p>{{ form_widget(form.adresseEmail, {'attr': {'placeholder' : '*Adresse email', 'oninput' : "this.className = ''", 'class' : 'input', 'name': 'email' }}) }}</p>
					<p>{{ form_widget(form.numeroTel, {'attr': {'placeholder' : '*Numéro de téléphone', 'oninput' : "this.className = ''", 'class' : 'input', 'name': 'telephone' }}) }}</p>
					<p>{{ form_widget(form.adresseSiege, {'attr': {'placeholder' : '*Adresse du siège social', 'oninput' : "this.className = ''", 'class' : 'input', 'name': 'adresse' }}) }}</p>
				</div>
				
				<div class="tab">
					<div class="progress mt-3 mb-3">
						<div class="progress-bar bg-success" role="progressbar" style="width: 66%" aria-valuenow="66" aria-valuemin="0" aria-valuemax="100"></div>
					</div>
					<h4 class="text-center">Informtion Location</h4>
					<p class="">
						{{ form_widget(form.departementDepart) }}
					</p>
					<p class="d-inline-flex w-100">
						{{ form_widget(form.debutLocation, {'attr': {'oninput' : "this.className = ''", 'name' : 'start', 'class' : 'input'}}) }}
						{{ form_widget(form.finLocation, {'attr': {'oninput' : "this.className = ''", 'name' : 'end', 'class' : 'input'}}) }}
					</p>
					<p>
						<div class="mb-0">
							{{ form_label(form.typeVehicule, "Type de véhicule dont j’ai besoin : ") }}
							{{ form_errors(form.typeVehicule) }}<br>
						</div>
						<div class="mb-0">
							{{ form_widget(form.typeVehicule, {'attr': {'oninput' : "this.className = ''", 'name' : 'typeVehicule', 'class' : 'input'}}) }}
						</div>
					</p>
					<p>
						<div class="mb-0">
							{{ form_label(form.typeLocation, "Type de location : ") }}<br>
						</div>
						<div class="mb-0">
							{{form_widget(form.typeLocation)}} 
						</div>
					</p>
					<p>
						{{ form_widget(form.nombrePlaces) }}
					</p>
					<p >
						<div class="mb-0">
							{{ form_label(form.besoinChauffeur, "J'ai besoin d'un chauffeur accompagnateur : ") }}
							{{ form_errors(form.besoinChauffeur) }}<br>
						</div>
						<div class="mt-0">
							{{ form_widget(form.besoinChauffeur) }}
						</div>						
					</p>
					
				</div>
				
				<div class="tab">
					<div class="progress mt-3 mb-3">
						<div class="progress-bar bg-success" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
					</div>
					<h4 class="text-center">Information Complémentaire</h4>
					<p>
						{{form_row(form.message, {'attr': {'placeholder': 'Décrivez votre demande', 'name' : 'demande', 'class':'w-100', 'required':'true'}})}}
					</p>
					<p>
						{{form_row(form.consentement)}}
					</p>
				</div>
				<div style="overflow:auto;">
					<div style="float:right;">
						<button type="button" id="prevBtn" onclick="nextPrev(-1)">Précédent</button>
						<button type="button" id="nextBtn" onclick="nextPrev(1)">Suivant</button>
					</div>
				</div>
				<!-- Circles which indicates the steps of the form: -->
				<div style="text-align:center;margin-top:40px;">
					<span class="step"></span>
					<span class="step"></span>
					<span class="step"></span>
				</div>
				{{ form_end(form) }}
			</form>
		</section>
		<br>
		<!--End Devis Form-->
		
	</main><!-- End #main -->
	{% include "footer.html.twig" %}
	{% block scripts %}
		<script>
        var currentTab = 0; // Current tab is set to be the first tab (0)
        showTab(currentTab); // Display the current tab

        function showTab(n) {
            // This function will display the specified tab of the form...
            var x = document.getElementsByClassName("tab");
            x[n].style.display = "block";
            //... and fix the Previous/Next buttons:
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").innerHTML = "Envoyer";
            } else {
                document.getElementById("nextBtn").innerHTML = "Suivant";
            }
            //... and run a function that will display the correct step indicator:
            fixStepIndicator(n)
        }

        function nextPrev(n) {
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab");
            // Exit the function if any field in the current tab is invalid:
            if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form...
            if (currentTab >= x.length) {
                // ... the form gets submitted:
				document.getElementById("nextBtn").style.display = "none";
				document.getElementById("prevBtn").style.display = "none";
				document.getElementById("titre").innerHTML = "<center>Redirection en cours</center>";
                document.getElementById("regForm").submit();
                return false;
            }
            // Otherwise, display the correct tab:
            showTab(currentTab);
        }

        function validateForm() {
            // This function deals with validation of the form fields
            var x, y, i, valid = true;
            x = document.getElementsByClassName("tab");
            y = x[currentTab].getElementsByTagName("input");
            // A loop that checks every input field in the current tab:
            for (i = 0; i < y.length; i++) {
                // If a field is empty...
                if (y[i].value == "") {
                    // add an "invalid" class to the field:
                    y[i].className += " invalid";
                    // and set the current valid status to false
                    valid = false;
                }
            }
            // If the valid status is true, mark the step as finished and valid:
            if (valid) {
                document.getElementsByClassName("step")[currentTab].className += " finish";
            }
            return valid; // return the valid status
        }

        function fixStepIndicator(n) {
            // This function removes the "active" class of all steps...
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
                x[i].className = x[i].className.replace(" active", "");
            }
            //... and adds the "active" class on the current step:
            x[n].className += " active";
        }
    </script>
	{% endblock %}
{% endblock %}
